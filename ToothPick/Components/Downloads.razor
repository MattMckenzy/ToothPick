<ul class="list-group">
    @{
        @foreach (KeyValuePair<Media, Download> keyValuePair in DownloadList.OrderByDescending(download => download.Value.DownloadProgress?.State ?? 0).ThenByDescending(download => download.Value.DownloadProgress?.Progress ?? 0).ThenBy(download => download.Key.DatePublished ?? DateTime.MaxValue))
        {
            <DownloadItem @key="keyValuePair.Key" Media="keyValuePair.Key" Download="keyValuePair.Value"/>
        }
    }
</ul>